///
/// Big Picture by HTML5 UP
/// html5up.net | @ajlkn
/// Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
///

/* Gallery */

.gallery {
  @include vendor("display", "flex");
  @include vendor("flex-wrap", "wrap");
  width: 45em;
  max-width: 100%;
  margin: 0 auto _size(element-margin) auto;

  article {
    @include vendor("transition", ("transform 0.5s ease", "opacity 1s ease"));
    @include vendor("transform", "translateX(0)");
    width: 50%;
    position: relative;
    opacity: 1;

    .image {
      margin: 0;
      display: block;
      position: relative;
      overflow: hidden;
      max-height: calc(210px + 5vw);
      cursor: pointer;

      img {
        object-fit: cover;
      }

      .teaser-background,
      .teaser-foreground {
        @include vendor(
          "transition",
          ("transform 0.5s ease", "opacity 1.2s ease")
        );
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
      }

      .teaser-background {
        background-color: _palette(dark, bg);
      }

      .teaser-foreground {
        @include vendor("transform", "translateY(-100%)");
        padding: 0.2em;
        color: _palette(dark, fg);
      }

      &:hover {
        .teaser-background {
          opacity: 0.7;
        }

        .teaser-foreground {
          @include vendor("transform", "translateY(0)");
          opacity: 1;
        }
      }
    }

    @for $i from 1 through 23 {
      &:nth-last-child(#{$i}n) {
        @include vendor("transition-delay", "#{(0.05s * $i)}");
      }

      &:nth-last-child(#{$i + 1}n) {
        @include vendor("transition-delay", "#{(0.05s * $i)}");
      }
    }
  }

  &:not(.in-viewport) {
    &.above-viewport,
    &.below-viewport {
      article {
        opacity: 0;

        &.from-left {
          @include vendor("transform", "translateX(-14em)");
        }

        &.from-right {
          @include vendor("transform", "translateX(14em)");
        }

        &.from-top {
          @include vendor("transform", "translateY(-7em)");
        }

        &.from-bottom {
          @include vendor("transform", "translateY(7em)");
        }
      }
    }
  }

  @include breakpoint("<=xsmall") {
    @include vendor("flex-wrap", "nowrap");
    @include vendor("flex-direction", "column");

    article {
      width: 100%;
    }
  }
}
